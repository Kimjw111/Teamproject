<!DOCTYPE html>
<html>
  <head>
    <title>Socket.io 챗봇</title>
  </head>
  <body>
    <h1>Socket.io 챗봇</h1>

    <input type="text" id="messageInput" placeholder="메시지를 입력하세요" />
    <button id="sendButton">전송</button>

    <ul id="messageList"></ul>

    <script src="https://cdn.socket.io/4.2.0/socket.io.js"></script>
    <script>
      const socket = io()

      const messageList = document.getElementById('messageList')
      const messageInput = document.getElementById('messageInput')
      const sendButton = document.getElementById('sendButton')

      // 메시지를 전송합니다.
      function sendMessage() {
        const message = messageInput.value
        socket.emit('message', message)
        messageInput.value = ''
        addMessage('나: ' + message)
      }

      // 서버로부터의 메시지를 받아서 화면에 추가합니다.
      socket.on('chat message', (message) => {
        addMessage(message)
      })

      // 메시지를 화면에 추가합니다.
      function addMessage(message) {
        const li = document.createElement('li')
        li.textContent = message
        messageList.appendChild(li)
      }

      // 전송 버튼 클릭 시 메시지를 전송합니다.
      sendButton.addEventListener('click', sendMessage)

      // Enter 키 입력 시 메시지를 전송합니다.
      messageInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          sendMessage()
        }
      })
    </script>
  </body>
</html>
